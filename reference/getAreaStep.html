<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Calculate dBBMM and overlapping areas in steps — getAreaStep • RSP</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate dBBMM and overlapping areas in steps — getAreaStep"><meta property="og:description" content="When a long study period is analysed the dBBMM can crash R since they are computationally 
heavy. You can use this function to calculate the dBBMMs and overlapping areas (between pairs of 
groups) according to a fixed step (i.e. timeframe in number of days), and export the output to disk 
as it goes. If your computer runs out of memory and kills R, you can then resume the calculations
by setting a new output name (name.new) and specifying the previous one already stored in disk (name.file),
and defining the new start date to resume the calculations (start.time). It currently only works 
with the 50"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RSP</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/a-1_Preparing_the_data.html">1. Preparing the data</a>
    </li>
    <li>
      <a href="../articles/a-2_Refining_Shortest_paths.html">2. Refining the Shortest Paths in-water</a>
    </li>
    <li>
      <a href="../articles/a-3_dBBMM.html">3. Calculating utilization distribution</a>
    </li>
    <li>
      <a href="../articles/a-4_Overlaps.html">4. Calculating overlaps</a>
    </li>
    <li>
      <a href="../articles/a-5_Areas_in_steps.html">5. Calculating areas in steps</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/YuriNiella/RSP/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calculate dBBMM and overlapping areas in steps</h1>
    <small class="dont-index">Source: <a href="https://github.com/YuriNiella/RSP/blob/HEAD/R/get.R" class="external-link"><code>R/get.R</code></a></small>
    <div class="hidden name"><code>getAreaStep.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>When a long study period is analysed the dBBMM can crash R since they are computationally 
heavy. You can use this function to calculate the dBBMMs and overlapping areas (between pairs of 
groups) according to a fixed step (i.e. timeframe in number of days), and export the output to disk 
as it goes. If your computer runs out of memory and kills R, you can then resume the calculations
by setting a new output name (name.new) and specifying the previous one already stored in disk (name.file),
and defining the new start date to resume the calculations (start.time). It currently only works 
with the 50<!-- % and 95% contours. --></p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">getAreaStep</span><span class="op">(</span></span>
<span>  <span class="va">input</span>,</span>
<span>  <span class="va">base.raster</span>,</span>
<span>  <span class="va">UTM</span>,</span>
<span>  timeframe <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  start.time <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  save <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  name.new <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  name.file <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  groups <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>input</dt>
<dd><p>The output of <code><a href="runRSP.html">runRSP</a></code>.</p></dd>


<dt>base.raster</dt>
<dd><p>The water raster of the study area. For example the output of <code><a href="https://rdrr.io/pkg/actel/man/loadShape.html" class="external-link">loadShape</a></code>.</p></dd>


<dt>UTM</dt>
<dd><p>The UTM zone of the study area. Only relevant if a latlon-to-metric conversion is required.</p></dd>


<dt>timeframe</dt>
<dd><p>The intended temporal interval of interest (in number of days) to perform the calculations. Default is 1 day.</p></dd>


<dt>start.time</dt>
<dd><p>Character vector identifying the initial date (format = "Y-m-d") to start the calculations.</p></dd>


<dt>save</dt>
<dd><p>Logical (default is TRUE). Do you want to save the calculated areas to disk?</p></dd>


<dt>name.new</dt>
<dd><p>File name (character) to save calculations output to disk.</p></dd>


<dt>name.file</dt>
<dd><p>File name (character) of previous calculations output to be imported (if any).</p></dd>


<dt>groups</dt>
<dd><p>Vector of group names (character) of interest to perform calculations.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A dataframe of dBBMM areas per group and the corresponding overlaps</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># Import river shapefile</span></span></span>
<span class="r-in"><span><span class="va">water</span> <span class="op">&lt;-</span> <span class="fu">actel</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/actel/man/loadShape.html" class="external-link">loadShape</a></span><span class="op">(</span>path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"RSP"</span><span class="op">)</span>, </span></span>
<span class="r-in"><span> shape <span class="op">=</span> <span class="st">"River_latlon.shp"</span>, size <span class="op">=</span> <span class="fl">0.0001</span>, buffer <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span> </span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> This function requires packages 'rgdal' to operate. Please install it before proceeding.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create a transition layer with 8 directions</span></span></span>
<span class="r-in"><span><span class="va">tl</span> <span class="op">&lt;-</span> <span class="fu">actel</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/actel/man/transitionLayer.html" class="external-link">transitionLayer</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">water</span>, directions <span class="op">=</span> <span class="fl">8</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error:</span> This function requires packages 'rgdal' to operate. Please install it before proceeding.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Import example output from actel::explore() </span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">input.example</span><span class="op">)</span> </span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Run RSP analysis</span></span></span>
<span class="r-in"><span><span class="va">rsp.data</span> <span class="op">&lt;-</span> <span class="fu"><a href="runRSP.html">runRSP</a></span><span class="op">(</span>input <span class="op">=</span> <span class="va">input.example</span>, t.layer <span class="op">=</span> <span class="va">tl</span>, coord.x <span class="op">=</span> <span class="st">"Longitude"</span>, coord.y <span class="op">=</span> <span class="st">"Latitude"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> M: Calculating RSP for the 'explore' data compiled on 2020-09-17 12:14:48.354614</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   |                                                                    |                                                            |   0%</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in h(simpleError(msg, call)):</span> error in evaluating the argument 'x' in selecting a method for function 'shortestPath': object 'tl' not found</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Timing stopped at: 0.004 0 0.004</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Calculate dBBMM and overlaps in steps:</span></span></span>
<span class="r-in"><span><span class="va">df.areas</span> <span class="op">&lt;-</span> <span class="fu">getAreaStep</span><span class="op">(</span>input <span class="op">=</span> <span class="va">rsp.data</span>, base.raster <span class="op">=</span> <span class="va">water</span>, UTM <span class="op">=</span> <span class="fl">56</span>, timeframe <span class="op">=</span> <span class="fl">1</span>, </span></span>
<span class="r-in"><span> name.new <span class="op">=</span> <span class="st">"save.csv"</span>, groups <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"G1"</span>, <span class="st">"G2"</span><span class="op">)</span><span class="op">)</span> </span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in eval(expr, envir, enclos):</span> object 'rsp.data' not found</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Yuri Niella, Hugo Flávio.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

