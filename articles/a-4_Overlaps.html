<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>4. Calculating overlaps • RSP</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="4. Calculating overlaps">
<meta property="og:description" content="RSP">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RSP</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/a-1_Preparing_the_data.html">1. Preparing the data</a>
    </li>
    <li>
      <a href="../articles/a-2_Refining_Shortest_paths.html">2. Refining the Shortest Paths in-water</a>
    </li>
    <li>
      <a href="../articles/a-3_dBBMM.html">3. Calculating utilization distribution</a>
    </li>
    <li>
      <a href="../articles/a-4_Overlaps.html">4. Calculating overlaps</a>
    </li>
    <li>
      <a href="../articles/a-5_Areas_in_steps.html">5. Calculating areas in steps</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/YuriNiella/RSP/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>4. Calculating overlaps</h1>
            <h3 data-toc-skip class="subtitle">Refining the Shortest
Paths (RSP) of animals tracked with acoustic transmitters in estuarine
regions</h3>
                        <h4 data-toc-skip class="author">Yuri Niella
&amp; Hugo Flávio</h4>
            
            <h4 data-toc-skip class="date">2023-12-08</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/YuriNiella/RSP/blob/HEAD/vignettes/a-4_Overlaps.Rmd" class="external-link"><code>vignettes/a-4_Overlaps.Rmd</code></a></small>
      <div class="hidden name"><code>a-4_Overlaps.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="index">Index<a class="anchor" aria-label="anchor" href="#index"></a>
</h2>
<ol style="list-style-type: decimal">
<li><a href="a-1_Preparing_the_data.html">Preparing the data</a></li>
<li><a href="a-2_Refining_Shortest_paths.html">Refining the Shortest
Paths in-water</a></li>
<li><a href="a-3_dBBMM.html">Calculating utilization
distribution</a></li>
<li><a href="a-4_Overlaps.html">Calculating overlaps</a></li>
<li><a href="a-5_Areas_in_steps.html">Calculating areas in
steps</a></li>
</ol>
<hr>
<p>If your study comprises <strong>multiple biological groups</strong>
(e.g. different species, different sexes, etc.), you might find it
useful to calculate the <strong>overlap</strong> between them. To
calculate the overlaps, the areas of space use must be first calculated
at <strong>group</strong> level (using the <code><a href="../reference/getAreas.html">getAreas()</a></code>
function with <code>type = 'group'</code>). Overlaps are automatically
calculated at the same levels provided in the <code>breaks</code>
argument in <code><a href="../reference/getAreas.html">getAreas()</a></code> (50% and 95% by default). Areas of
overlap correspond to the area/percentage of the smallest area that
falls within the largest area, calculated for all monitored groups and
returned both in absolute (squared metres) and percentages.</p>
<div class="section level3">
<h3 id="calculating-overlaps-for-group-dbbmm">4.1. Calculating overlaps for group dBBMM<a class="anchor" aria-label="anchor" href="#calculating-overlaps-for-group-dbbmm"></a>
</h3>
<p>When utilization distribution areas are calculated for <strong>group
dBBMM</strong>, models are calculated at the track level for each
monitored animal. This analysis does not provide standardized tracks,
and start and end times vary among tracked individuals depending on when
they were present within the study area. Consequently, this option will
simply calculate the general overlapping areas among the groups of
interest:</p>
<pre><code><span><span class="va">overlap.save</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getOverlaps.html">getOverlaps</a></span><span class="op">(</span><span class="va">areas.group</span><span class="op">)</span></span>
<span><span class="va">overlap.save</span><span class="op">$</span><span class="va">areas</span><span class="op">$</span><span class="va">`0.95`</span><span class="op">$</span><span class="va">absolute</span></span></code></pre>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="right">R64K-4075</th>
<th align="right">R64K-4125</th>
<th align="right">R64K-4128</th>
<th align="right">R64K-4138</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">R64K-4075</td>
<td align="right">NA</td>
<td align="right">82080502</td>
<td align="right">31831020</td>
<td align="right">103273976</td>
</tr>
<tr class="even">
<td align="left">R64K-4125</td>
<td align="right">82080502</td>
<td align="right">NA</td>
<td align="right">33164114</td>
<td align="right">186469924</td>
</tr>
<tr class="odd">
<td align="left">R64K-4128</td>
<td align="right">31831020</td>
<td align="right">33164114</td>
<td align="right">NA</td>
<td align="right">44753870</td>
</tr>
<tr class="even">
<td align="left">R64K-4138</td>
<td align="right">103273976</td>
<td align="right">186469924</td>
<td align="right">44753870</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
<pre><code><span><span class="va">overlap.save</span><span class="op">$</span><span class="va">areas</span><span class="op">$</span><span class="va">`0.95`</span><span class="op">$</span><span class="va">percentage</span></span></code></pre>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="right">R64K-4075</th>
<th align="right">R64K-4125</th>
<th align="right">R64K-4128</th>
<th align="right">R64K-4138</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">R64K-4075</td>
<td align="right">NA</td>
<td align="right">0.7607161</td>
<td align="right">0.7090909</td>
<td align="right">0.9571357</td>
</tr>
<tr class="even">
<td align="left">R64K-4125</td>
<td align="right">0.7607161</td>
<td align="right">NA</td>
<td align="right">0.7387879</td>
<td align="right">0.9081876</td>
</tr>
<tr class="odd">
<td align="left">R64K-4128</td>
<td align="right">0.7090909</td>
<td align="right">0.7387879</td>
<td align="right">NA</td>
<td align="right">0.9969697</td>
</tr>
<tr class="even">
<td align="left">R64K-4138</td>
<td align="right">0.9571357</td>
<td align="right">0.9081876</td>
<td align="right">0.9969697</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
<p>In the example we can notice that <strong>R64K-4075</strong> and
<strong>R64K-4125</strong> used 76.07% of the same areas, whereas
<strong>R64K-4075</strong> and <strong>R64K-4128</strong> only
overlapped in 70.91%. Now we can use <code><a href="../reference/plotOverlaps.html">plotOverlaps()</a></code> to see
exactly where in the study area these overlaps took place:</p>
<pre><code>plotOverlaps(overlaps = over.save, areas = areas.save, base.raster = water.shape, 
    groups = c("R64K-4075", "R64K-4125"), level = 0.95) 
plotOverlaps(overlaps = over.save, areas = areas.save, base.raster = water.shape, 
    groups = c("R64K-4075", "R64K-4128"), level = 0.95)

Warning message:
Raster pixels are placed at uneven horizontal intervals and will be shifted. Consider using geom_tile() instead.</code></pre>
<center>
<p><img src="plotOverlaps1.png" id="id" class="class" style="width:80.0%"></p>
</center>
<p>Please note that these plots can return a <strong>warning</strong>.
This is issued by <strong>ggplot2</strong> because, when there are
multiple tracks/tags in the same group, the empty cells of the raster
are cleared out to improve plotting efficiency. Please be aware that
<strong>this warning is harmless</strong> for the map created.</p>
</div>
<div class="section level3">
<h3 id="calculating-overlaps-for-timeslot-dbbmm">4.2. Calculating overlaps for timeslot dBBMM<a class="anchor" aria-label="anchor" href="#calculating-overlaps-for-timeslot-dbbmm"></a>
</h3>
<p>The standardized tracks returned from <strong>timeslot dBBMM</strong>
can be used to calculate overlaps between multiple groups both in
<strong>space</strong> and <strong>time</strong>.</p>
<pre><code><span><span class="va">overlap.save</span> <span class="op">&lt;-</span> <span class="fu">geOverlaps</span><span class="op">(</span><span class="va">areas.group</span><span class="op">)</span></span>
<span><span class="va">overlap.save</span><span class="op">$</span><span class="va">areas</span><span class="op">$</span><span class="va">`0.95`</span><span class="op">$</span><span class="va">absolutes</span><span class="op">$</span><span class="va">`128`</span></span></code></pre>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="right">Bream</th>
<th align="right">Tarwhine</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Bream</td>
<td align="right">NA</td>
<td align="right">2454723</td>
</tr>
<tr class="even">
<td align="left">Tarwhine</td>
<td align="right">2454723</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
<pre><code><span><span class="va">overlap.save</span><span class="op">$</span><span class="va">areas</span><span class="op">$</span><span class="va">`0.95`</span><span class="op">$</span><span class="va">percentage</span><span class="op">$</span><span class="va">`128`</span></span></code></pre>
<table class="table">
<thead><tr class="header">
<th align="left"></th>
<th align="right">Bream</th>
<th align="right">Tarwhine</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Bream</td>
<td align="right">NA</td>
<td align="right">0.9680747</td>
</tr>
<tr class="even">
<td align="left">Tarwhine</td>
<td align="right">0.9680747</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
<pre><code><span><span class="fu"><a href="../reference/plotOverlaps.html">plotOverlaps</a></span><span class="op">(</span>overlaps <span class="op">=</span> <span class="va">overlap.save</span>, areas <span class="op">=</span> <span class="va">areas.group</span>, base.raster <span class="op">=</span> <span class="va">water.shape</span>, </span>
<span>  groups <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Bream"</span>, <span class="st">"Tarwhine"</span><span class="op">)</span>, timeslot <span class="op">=</span> <span class="fl">127</span>, level <span class="op">=</span> <span class="fl">0.95</span>, title <span class="op">=</span> <span class="st">"timeslot 127"</span><span class="op">)</span> </span>
<span></span>
<span></span>
<span><span class="fu"><a href="../reference/plotOverlaps.html">plotOverlaps</a></span><span class="op">(</span>overlaps <span class="op">=</span> <span class="va">overlap.save</span>, areas <span class="op">=</span> <span class="va">areas.group</span>, base.raster <span class="op">=</span> <span class="va">water.shape</span>, </span>
<span>  groups <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Bream"</span>, <span class="st">"Tarwhine"</span><span class="op">)</span>, timeslot <span class="op">=</span> <span class="fl">128</span>, level <span class="op">=</span> <span class="fl">0.95</span>, title <span class="op">=</span> <span class="st">"timeslot 128"</span><span class="op">)</span> </span></code></pre>
<p><img src="plotOverlaps2.png" id="id" class="class" style="width:95.0%"></p>
<p>Note that if the two groups don’t overlap, the following message will
be issued:</p>
<pre><code>M: No overlap found between 'Bream' and 'Tarwhine'. Plotting only the separate areas.</code></pre>
</div>
<div class="section level3">
<h3 id="obtain-overlap-data-from-timeslot-dbbmm-for-applying-further-statistical-analysis">4.2.1. Obtain overlap data from timeslot dBBMM for applying further
statistical analysis<a class="anchor" aria-label="anchor" href="#obtain-overlap-data-from-timeslot-dbbmm-for-applying-further-statistical-analysis"></a>
</h3>
<p>Maybe you are interested in better understanding the potential
factors influencing the <strong>overlapping areas between different
biological groups</strong>. If that’s your case, and you have ran a
timeslot dBBMM analysis, the function <code>getOverlapData()</code> is
what you are looking for. You’ll need to provide the outputs from
<code><a href="../reference/getOverlaps.html">getOverlaps()</a></code> (input) and <code><a href="../reference/dynBBMM.html">dynBBMM()</a></code> (dbbmm),
and select the two biological groups of interest (groups) together with
the desired level of the dBBMM contour to extract the overlaping data
for (level). Overlaps for each timeslot will then be returned at both
<strong>absolute</strong> and <strong>percentage</strong> values.</p>
<pre><code><span><span class="va">df.overlap</span> <span class="op">&lt;-</span> <span class="fu">getOverlapData</span><span class="op">(</span>input <span class="op">=</span> <span class="va">overlap.data</span>, dbbmm <span class="op">=</span> <span class="va">dbbmm.data</span>, </span>
<span>    groups <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"G1"</span>, <span class="st">"G2"</span><span class="op">)</span>, level <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> </span>
<span><span class="va">df.overlap</span></span></code></pre>
<table class="table">
<colgroup>
<col width="6%">
<col width="25%">
<col width="25%">
<col width="19%">
<col width="22%">
</colgroup>
<thead><tr class="header">
<th align="left">slot</th>
<th align="right">start</th>
<th align="right">stop</th>
<th align="right">Absolute_G1_G2</th>
<th align="right">Percentage_G1_G2</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="right">2020-01-04 00:00:00</td>
<td align="right">2020-01-04 11:59:59</td>
<td align="right">79761.94</td>
<td align="right">1.0000000</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="right">2020-01-04 12:00:00</td>
<td align="right">2020-01-04 23:59:59</td>
<td align="right">25182.57</td>
<td align="right">0.9496124</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="the-end">The end<a class="anchor" aria-label="anchor" href="#the-end"></a>
</h2>
<p>You have reached the end of the manual! We wish you the best luck
with your data :)</p>
<p>If you find any bug, please let us know <a href="https://github.com/YuriNiella/RSP/issues" class="external-link">through this
link.</a></p>
<p><a href="a-5_Areas_in_steps.html">Proceed to Calculating areas in
steps</a></p>
<p><a href="#">Back to top.</a></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Yuri Niella, Hugo Flávio.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
