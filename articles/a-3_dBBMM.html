<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>3. Calculating utilization distribution • RSP</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="3. Calculating utilization distribution">
<meta property="og:description" content="RSP">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RSP</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/a-1_Preparing_the_data.html">1. Preparing the data</a>
    </li>
    <li>
      <a href="../articles/a-2_Refining_Shortest_paths.html">2. Refining the Shortest Paths in-water</a>
    </li>
    <li>
      <a href="../articles/a-3_dBBMM.html">3. Calculating utilization distribution</a>
    </li>
    <li>
      <a href="../articles/a-4_Overlaps.html">4. Calculating overlaps</a>
    </li>
    <li>
      <a href="../articles/a-5_Areas_in_steps.html">5. Calculating areas in steps</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/YuriNiella/RSP/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>3. Calculating utilization distribution</h1>
            <h3 data-toc-skip class="subtitle">Refining the Shortest
Paths (RSP) of animals tracked with acoustic transmitters in estuarine
regions</h3>
                        <h4 data-toc-skip class="author">Yuri Niella
&amp; Hugo Flávio</h4>
            
            <h4 data-toc-skip class="date">2023-08-11</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/YuriNiella/RSP/blob/HEAD/vignettes/a-3_dBBMM.Rmd" class="external-link"><code>vignettes/a-3_dBBMM.Rmd</code></a></small>
      <div class="hidden name"><code>a-3_dBBMM.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="index">Index<a class="anchor" aria-label="anchor" href="#index"></a>
</h2>
<ol style="list-style-type: decimal">
<li><a href="a-1_Preparing_the_data.html">Preparing the data</a></li>
<li><a href="a-2_Refining_Shortest_paths.html">Refining the Shortest
Paths in-water</a></li>
<li><a href="a-3_dBBMM.html">Calculating utilization
distribution</a></li>
<li><a href="a-4_Overlaps.html">Calculating overlaps</a></li>
<li><a href="a-5_Areas_in_steps.html">Calculating areas in
steps</a></li>
</ol>
<hr>
<p>After estimating the in-water shortest paths, we can now use the
output from <code><a href="../reference/runRSP.html">runRSP()</a></code> to calculate utilization distribution
areas using <strong>dynamic Brownian Bridge Movement Models</strong>
(dBBMM) with the <code><a href="../reference/dynBBMM.html">dynBBMM()</a></code> function. If you are using a
geographic coordinate reference system, here you will need to know the
<a href="http://www.dmap.co.uk/utmworld.htm" class="external-link">UTM zone</a> of your study
site and specify it using the argument <code>UTM</code>. By default, the
analysis will run for all transmitters detected, but you can determine
also which transmitters you would like to include using
<code>tags</code>.</p>
<p>A common error you might get when calculating dBBMMs is that the
model does not have enough space to perform its calculations. This can
happen when your stations are <strong>near to the edges</strong> of your
base raster. When calculating the space use areas, the dBBMM contours
might hit these edges causing the algorithm to crash and stop:</p>
<pre><code>dbbmm.results &lt;- dynBBMM(input = rsp.results, base.raster = water.shape)

Error: The brownian bridge model needs a larger raster to work on. This could happen because some of the detections are too close to the raster's edge. 
You can create a larger raster by using the argument 'buffer' in loadShape. If the error persists, increase the buffer size further.</code></pre>
<p>This can be fixed simply by increasing the size of your base raster
using the argument <code>buffer</code> in the function
<code><a href="https://rdrr.io/pkg/actel/man/loadShape.html" class="external-link">loadShape()</a></code>. The buffer argument can take one value (which
is applied to all directions), or four values (xmin, xmax, ymin, ymax).
Remember to provide a buffer in metres for metric shapefiles, and in
degrees for geographic shapefiles:</p>
<pre><code><span><span class="va">water.large</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/actel/man/loadShape.html" class="external-link">loadShape</a></span><span class="op">(</span>shape <span class="op">=</span> <span class="st">"my_study_areas.shp"</span>, size <span class="op">=</span> <span class="fl">0.0001</span>, buffer <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span>  </span></code></pre>
</div>
<div class="section level2">
<h2 id="total-dynamic-brownian-bridge-movement-model-group-dbbmm">3.1. Total dynamic Brownian Bridge Movement Model (group dBBMM)<a class="anchor" aria-label="anchor" href="#total-dynamic-brownian-bridge-movement-model-group-dbbmm"></a>
</h2>
<p>This option calculates a series of dBBMM for each animal track from
all the groups monitored and included in the <code><a href="../reference/runRSP.html">runRSP()</a></code>
analysis. Track <strong>quality checks</strong> are performed to ensure
that only good tracks are used, which will allow the dBBMM to converge
properly. This is an example of the returned messages from
<code><a href="../reference/dynBBMM.html">dynBBMM()</a></code>:</p>
<pre><code>dbbmm.results &lt;- dynBBMM(input = rsp.results, UTM = 32, base.raster = water.large)

M: Converting coordinates to UTM. Original latitude/longitude values for the detections will be stored in columns 'O.LAT' and 'O.LON'.
M: Preparing data to apply dBBMM.
M: No specific transmitters selected. All the data will be used for analysis.
Warning: 7 track(s) in group R64K-4075 have less than eight detections and will not be used.
Warning: 1 track(s) in group R64K-4075 are shorter than 30 minutes and will not be used.
Warning: 2 individual detections were removed in group R64K-4125 due to simultaneous detections at two receivers.
Warning: 1 track(s) in group R64K-4125 have less than eight detections and will not be used.
Warning: 1 track(s) in group R64K-4128 have less than eight detections and will not be used.
Warning: 2 track(s) in group R64K-4128 are shorter than 30 minutes and will not be used.
Warning: 6 track(s) in group R64K-4138 have less than eight detections and will not be used.
M: In total, 93 detections were excluded as they failed the track quality checks.</code></pre>
<dl>
<dt>Note:</dt>
<dd>
You can suppress the individual warning messages by setting
<code>verbose</code> to FALSE. You will still receive one single message
indicating how many detections were excluded in total. After calculating
UDs, the <strong>land areas</strong> are excluded so that the final
results represent only <strong>in-water areas of use</strong>.
</dd>
</dl>
<pre><code>dbbmm_all &lt;- dynBBMM(input = rsp.data, UTM = 32, base.raster = water.large, verbose = FALSE)

M: Converting coordinates to UTM. Original latitude/longitude values for the detections will be stored in columns 'O.LAT' and 'O.LON'.
M: Preparing data to apply dBBMM.
M: No specific transmitters selected. All the data will be used for analysis.
M: In total, 93 detections were excluded as they failed the track quality checks.
M: Calculating dBBMM: R64K-4075
M: Success! (Time spent: 00:00:06)
M: Calculating dBBMM: R64K-4125
M: Success! (Time spent: 00:01:07)
M: Calculating dBBMM: R64K-4128
M: Success! (Time spent: 00:00:10)
M: Calculating dBBMM: R64K-4138
M: Success! (Time spent: 00:00:43)
M: Subtracting land areas from output.</code></pre>
<p>The metadata on the tracks used for the dBBMMs is saved in the
<code>$valid.tracks</code> object as a data frame:</p>
<table class="table">
<colgroup>
<col width="7%">
<col width="12%">
<col width="10%">
<col width="8%">
<col width="23%">
<col width="23%">
<col width="13%">
</colgroup>
<thead><tr class="header">
<th align="left">Group</th>
<th align="right">Tag</th>
<th align="right">Track</th>
<th align="right">valid.n</th>
<th align="right">First.time</th>
<th align="right">Last.time</th>
<th align="right">Timespan</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">A</td>
<td align="right">R64K-4075</td>
<td align="right">Track_03</td>
<td align="right">125</td>
<td align="right">2018-03-07 00:41:10</td>
<td align="right">2018-03-07 08:20:02</td>
<td align="right">7.64 hours</td>
</tr>
<tr class="even">
<td align="left">A</td>
<td align="right">R64K-4075</td>
<td align="right">Track_08</td>
<td align="right">27</td>
<td align="right">2018-04-23 05:10:47</td>
<td align="right">2018-04-23 08:43:45</td>
<td align="right">3.54 hours</td>
</tr>
<tr class="odd">
<td align="left">A</td>
<td align="right">R64K-4075</td>
<td align="right">Track_09</td>
<td align="right">303</td>
<td align="right">2018-04-24 11:40:56</td>
<td align="right">2018-04-26 01:00:13</td>
<td align="right">37.32 hours</td>
</tr>
<tr class="even">
<td align="left">B</td>
<td align="right">R64K-4125</td>
<td align="right">Track_02</td>
<td align="right">206</td>
<td align="right">2018-04-21 13:13:24</td>
<td align="right">2018-04-23 09:09:34</td>
<td align="right">43.93 hours</td>
</tr>
<tr class="odd">
<td align="left">B</td>
<td align="right">R64K-4125</td>
<td align="right">Track_03</td>
<td align="right">1118</td>
<td align="right">2018-04-25 11:44:05</td>
<td align="right">2018-04-28 14:10:14</td>
<td align="right">74.43 hours</td>
</tr>
</tbody>
</table>
<p>Included is information on the biological group (Group) tracked,
number of valid detections (valid.n) used, and the duration of each
model (Timespan) in hours.</p>
<p>You can use <code><a href="../reference/plotContours.html">plotContours()</a></code> to visualize any of the dBBMM
calculated by specifying the <code>tag</code> and <code>track</code> you
want to plot:</p>
<pre><code><span><span class="fu"><a href="../reference/plotContours.html">plotContours</a></span><span class="op">(</span>input <span class="op">=</span> <span class="va">dbbmm_all</span>, tag <span class="op">=</span> <span class="st">"R64K-4138"</span>, track <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/plotContours.html">plotContours</a></span><span class="op">(</span>input <span class="op">=</span> <span class="va">dbbmm_all</span>, tag <span class="op">=</span> <span class="st">"R64K-4125"</span>, track <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre>
<dl>
<dt>Note:</dt>
<dd>
If a given tag only has one track, specifying just the tag will suffice.
</dd>
</dl>
<center>
<p><img src="plotContours1.png" id="id" class="class" style="width:70.0%;height:70.0%"></p>
</center>
<p>The <code>breaks</code> argument can be used to specify which
contours to plot. By default, the <strong>25%</strong>,
<strong>50%</strong>, <strong>75%</strong>, and <strong>95%</strong>
contours are returned. Again, <code><a href="../reference/addStations.html">addStations()</a></code> can be used to
add the station locations.</p>
</div>
<div class="section level2">
<h2 id="fine-scale-dynamic-brownian-bridge-movement-model-timeslot-dbbmm">3.2. Fine-scale dynamic Brownian Bridge Movement Model (timeslot
dBBMM)<a class="anchor" aria-label="anchor" href="#fine-scale-dynamic-brownian-bridge-movement-model-timeslot-dbbmm"></a>
</h2>
<p>dBBMMs can also be calculated according to a <strong>fixed moving
temporal window</strong>. This allows investigating how space use
patterns varied in fine-scale. It is useful for assessing the influence
of environmental parameters upon space-use of different groups tracked
within the study area. The same <code><a href="../reference/dynBBMM.html">dynBBMM()</a></code> function is used,
but here the argument <code>timeframe</code> has to be defined
<strong>in hours</strong> as the temporal window of interest. The total
tracking period will be divided into <code>timeslots</code>, and dBBMMs
calculated for each group monitored (for each timeslot).</p>
<dl>
<dt>Note:</dt>
<dd>
You can use the <code><a href="../reference/plotDensities.html">plotDensities()</a></code> function to help you choose
the most suitable <code>timeframe</code> for <code><a href="../reference/dynBBMM.html">dynBBMM()</a></code>, to
make sure you won’t be mostly using exclusively interpolated locations
in your fine-scale analysis:
</dd>
</dl>
<pre><code><span><span class="fu"><a href="../reference/plotDensities.html">plotDensities</a></span><span class="op">(</span><span class="va">rsp.data</span><span class="op">)</span> <span class="co"># All groups are simultaneously analysed by default!</span></span>
<span><span class="fu"><a href="../reference/plotDensities.html">plotDensities</a></span><span class="op">(</span><span class="va">rsp.data</span>, group <span class="op">=</span> <span class="st">"Bream"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/plotDensities.html">plotDensities</a></span><span class="op">(</span><span class="va">rsp.data</span>, group <span class="op">=</span> <span class="st">"Luderick"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/plotDensities.html">plotDensities</a></span><span class="op">(</span><span class="va">rsp.data</span>, group <span class="op">=</span> <span class="st">"Tarwhine"</span><span class="op">)</span></span></code></pre>
<p><img src="plotDensities1.png" id="id" class="class" style="width:95.0%"></p>
<p>On this plot, we can notice that most of the consecutive detections
occurred at intervals of less than one or two hours for all groups
combined (Total), and that <strong>Luderick</strong> was the group with
longest mean detection intervals.</p>
<p><br></p>
<p>Now that we verified that most of the acoustic detections occurred
according below two hour time intervals (when the default
<code>max.time</code> of 24 hours was used in <code><a href="../reference/runRSP.html">runRSP()</a></code>),
setting up a <strong>timeframe</strong> argument longer than this value
should be safe for analysis. Let’s perform a fine-scale analysis using a
daily resolution (i.e. <code>timeframe = 24</code>):</p>
<pre><code>dbbmm.time &lt;- dynBBMM(input = rsp.data, UTM = 56, base.raster = water.shape, timeframe = 24, verbose = FALSE, start.time = "2014-07-01 00:00:00", stop.time = "2015-01-01 00:00:00")

M: Converting coordinates to UTM. Original latitude/longitude values for the detections will be stored in columns 'O.LAT' and 'O.LON'.
M: Discarding detection data previous to 2014-07-01 00:00:00 and posterior to 2015-01-01 00:00:00 per user command.
M: Preparing data to apply dBBMM.
M: No specific transmitters selected. All the data will be used for analysis.
M: Activating separate dBBMM calculations for each time slot.
M: In total, 60 detections were excluded as they failed the track quality checks.
M: Calculating dBBMM: Bream
  |============================================================| 100%
M: Success! (Time spent: 00:15:29)
M: Calculating dBBMM: Tarwhine
  |============================================================| 100%
M: Success! (Time spent: 00:03:07)
M: Subtracting land areas from output.</code></pre>
<p>Please note that you can run the analysis for only a time interval of
interest using the <code>start.time</code> and <code>stop.time</code>
arguments. Setting a <strong>start.time</strong> will cause all data
previous to this time to be excluded and, similarly, setting a
<strong>stop.time</strong> will exclude all the data posterior to the
specified time (you can choose to use only one of these two
arguments).</p>
<p>Metadata on the timeslots generated for the analysis is returned in
the <code>$timeslots</code> object:</p>
<table class="table">
<thead><tr class="header">
<th align="left">slot</th>
<th align="right">start</th>
<th align="right">stop</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="right">2014-06-30 00:00:00</td>
<td align="right">2014-06-30 23:59:59</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="right">2014-07-01 00:00:00</td>
<td align="right">2014-07-01 23:59:59</td>
</tr>
<tr class="odd">
<td align="left">3</td>
<td align="right">2014-07-02 00:00:00</td>
<td align="right">2014-07-02 23:59:59</td>
</tr>
<tr class="even">
<td align="left">4</td>
<td align="right">2014-07-03 00:00:00</td>
<td align="right">2014-07-03 23:59:59</td>
</tr>
<tr class="odd">
<td align="left">5</td>
<td align="right">2014-07-04 00:00:00</td>
<td align="right">2014-07-04 23:59:59</td>
</tr>
<tr class="even">
<td align="left">6</td>
<td align="right">2014-07-05 00:00:00</td>
<td align="right">2014-07-05 23:59:59</td>
</tr>
</tbody>
</table>
<p>And a new column will be included in the <code>$valid.tracks</code>
object, displaying the corresponding timeslot (Slot) that the dBBMMs
were calculated for. Notice how the valid tracks were partitioned to fit
in the defined <code>timeframe</code> (24 hours).</p>
<table class="table">
<colgroup>
<col width="8%">
<col width="15%">
<col width="7%">
<col width="5%">
<col width="7%">
<col width="21%">
<col width="21%">
<col width="11%">
</colgroup>
<thead><tr class="header">
<th align="left">Group</th>
<th align="right">Tag</th>
<th align="right">Track</th>
<th align="right">Slot</th>
<th align="right">valid.n</th>
<th align="right">First.time</th>
<th align="right">Last.time</th>
<th align="right">Timespan</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Bream</td>
<td align="right">A69-9002-10473</td>
<td align="right">Track_7</td>
<td align="right">1</td>
<td align="right">103</td>
<td align="right">2014-07-01 00:05:53</td>
<td align="right">2014-07-01 12:54:03</td>
<td align="right">12.8 hours</td>
</tr>
<tr class="even">
<td align="left">Bream</td>
<td align="right">A69-9002-10473</td>
<td align="right">Track_7</td>
<td align="right">2</td>
<td align="right">121</td>
<td align="right">2014-07-01 13:03:58</td>
<td align="right">2014-07-02 06:02:47</td>
<td align="right">16.9 hours</td>
</tr>
<tr class="odd">
<td align="left">Bream</td>
<td align="right">A69-9002-10473</td>
<td align="right">Track_8</td>
<td align="right">13</td>
<td align="right">105</td>
<td align="right">2014-07-12 18:40:30</td>
<td align="right">2014-07-13 12:55:45</td>
<td align="right">18.2 hours</td>
</tr>
<tr class="even">
<td align="left">Tarwhine</td>
<td align="right">A69-9004-489</td>
<td align="right">Track_3</td>
<td align="right">128</td>
<td align="right">280</td>
<td align="right">2014-11-04 14:01:15</td>
<td align="right">2014-11-05 13:53:22</td>
<td align="right">23.8 hours</td>
</tr>
<tr class="odd">
<td align="left">Tarwhine</td>
<td align="right">A69-9004-489</td>
<td align="right">Track_3</td>
<td align="right">129</td>
<td align="right">243</td>
<td align="right">2014-11-05 14:00:37</td>
<td align="right">2014-11-06 13:56:15</td>
<td align="right">23.9 hours</td>
</tr>
<tr class="even">
<td align="left">Tarwhine</td>
<td align="right">A69-9004-489</td>
<td align="right">Track_3</td>
<td align="right">130</td>
<td align="right">98</td>
<td align="right">2014-11-06 14:06:09</td>
<td align="right">2014-11-07 13:52:10</td>
<td align="right">23.7 hours</td>
</tr>
</tbody>
</table>
<p>You can again use <code><a href="../reference/plotContours.html">plotContours()</a></code> to visualize the
results of the timeslot dBBMM, by setting the <strong>timeslot</strong>
of interest:</p>
<pre><code><span><span class="fu"><a href="../reference/plotContours.html">plotContours</a></span><span class="op">(</span>input <span class="op">=</span> <span class="va">dbbmm.time</span>, tag <span class="op">=</span> <span class="st">"A69-9004-485"</span>, track <span class="op">=</span> <span class="st">"4"</span>, timeslot <span class="op">=</span> <span class="fl">124</span>, title <span class="op">=</span> <span class="st">"Bream - Slot 124"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/plotContours.html">plotContours</a></span><span class="op">(</span>input <span class="op">=</span> <span class="va">dbbmm.time</span>, tag <span class="op">=</span> <span class="st">"A69-9004-489"</span>, track <span class="op">=</span> <span class="st">"3"</span>, timeslot <span class="op">=</span> <span class="fl">124</span>, title <span class="op">=</span> <span class="st">"Tarwhine - Slot 124"</span><span class="op">)</span></span></code></pre>
<p><img src="plotContours3.png" id="id" class="class" style="width:100.0%"></p>
<dl>
<dt>Note:</dt>
<dd>
You can customize the title of you plot by setting a <code>title</code>
argument.
</dd>
</dl>
</div>
<div class="section level2">
<h2 id="calculating-areas-of-space-use">3.3. Calculating areas of space use<a class="anchor" aria-label="anchor" href="#calculating-areas-of-space-use"></a>
</h2>
<p>Now that you have dBBMMs you can calculate the areas used with the
<code><a href="../reference/getAreas.html">getAreas()</a></code> function, both at <strong>group</strong> or
<strong>track</strong> level, by using the <code>type</code> argument.
Group areas will correspond to the total areas used by all animals from
a particular group. When <code>type = 'track'</code>, areas are
calculated for each animal track individually. Areas are stored in the
<code>$areas</code> object, as a list of dataframes for each tracked
group.</p>
<div class="section level3">
<h3 id="group-areas">3.3.1. Group areas<a class="anchor" aria-label="anchor" href="#group-areas"></a>
</h3>
<pre><code><span><span class="va">areas.group</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getAreas.html">getAreas</a></span><span class="op">(</span>input <span class="op">=</span> <span class="va">dbbmm.time</span>, type <span class="op">=</span> <span class="st">"group"</span><span class="op">)</span></span>
<span><span class="va">areas.group</span><span class="op">$</span><span class="va">areas</span><span class="op">$</span><span class="va">Bream</span></span></code></pre>
<table class="table">
<thead><tr class="header">
<th align="left">Slot</th>
<th align="right">Area.5</th>
<th align="right">Area.95</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="right">974333.6</td>
<td align="right">4310814</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="right">1218435.9</td>
<td align="right">6141996</td>
</tr>
<tr class="odd">
<td align="left">13</td>
<td align="right">3037994.5</td>
<td align="right">12030757</td>
</tr>
<tr class="even">
<td align="left">14</td>
<td align="right">974333.6</td>
<td align="right">4408787</td>
</tr>
<tr class="odd">
<td align="left">15</td>
<td align="right">711134.8</td>
<td align="right">3224808</td>
</tr>
<tr class="even">
<td align="left">16</td>
<td align="right">696189.8</td>
<td align="right">3053355</td>
</tr>
</tbody>
</table>
<p>If your analysis is of type timeslot dBBMM, a column will be added
representing the corresponding timeslots (Slot). Please note that the
areas of use are calculated by default for the 50% and 95% contours, but
can be customized using the <code>breaks</code> argument.</p>
<p>You can plot the group areas of space use using the
<code><a href="../reference/plotAreas.html">plotAreas()</a></code> function:</p>
<pre><code><span><span class="fu"><a href="../reference/plotAreas.html">plotAreas</a></span><span class="op">(</span><span class="va">areas.group</span>, base.raster <span class="op">=</span> <span class="va">water.shape</span>, group <span class="op">=</span> <span class="st">"Bream"</span>, timeslot <span class="op">=</span> <span class="fl">128</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/plotAreas.html">plotAreas</a></span><span class="op">(</span><span class="va">areas.group</span>, base.raster <span class="op">=</span> <span class="va">water.shape</span>, group <span class="op">=</span> <span class="st">"Tarwhine"</span>, timeslot <span class="op">=</span> <span class="fl">128</span><span class="op">)</span> </span></code></pre>
<p><img src="plotAreas.png" id="id" class="class" style="width:100.0%"></p>
<dl>
<dt>Note:</dt>
<dd>
plotAreas() can only plot group areas (i.e. run with
<code>type = "group"</code>).
</dd>
</dl>
<p>Also, when a <strong>timeslot dBBMM</strong> is run, and
<code><a href="../reference/getAreas.html">getAreas()</a></code> is set to <code>type = "group"</code>, you might
be interested in obtaining representative coordinate locations of the
dBBMM utilization distribution areas of your tracked animals. This can
be done using the <code><a href="../reference/getCentroids.html">getCentroids()</a></code> function, which will
extract centroid <strong>latitude</strong> and
<strong>longitude</strong> locations of a particular group of animals,
using all contours of a defined level of the dBBMM for each
timeslot:</p>
<pre><code><span><span class="va">df.centroid.B</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getCentroids.html">getCentroids</a></span><span class="op">(</span>input <span class="op">=</span> <span class="va">dbbmm.daily</span>, areas <span class="op">=</span> <span class="va">areas.daily</span>, level <span class="op">=</span> <span class="fl">0.5</span>, </span>
<span>  group <span class="op">=</span> <span class="st">"B"</span>, UTM <span class="op">=</span> <span class="fl">56</span><span class="op">)</span></span>
<span><span class="va">df.centroid.B</span></span></code></pre>
<table style="width:100%;" class="table">
<colgroup>
<col width="5%">
<col width="14%">
<col width="28%">
<col width="7%">
<col width="7%">
<col width="17%">
<col width="17%">
</colgroup>
<thead><tr class="header">
<th align="left">slot</th>
<th align="right">start</th>
<th align="right">stop</th>
<th align="right">Group</th>
<th align="right">Level</th>
<th align="right">Centroid.lat</th>
<th align="right">Centroid.lon</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="right">2014-11-01</td>
<td align="right">2014-11-01 23:59:59</td>
<td align="right">B</td>
<td align="right">50%</td>
<td align="right">-33.08446</td>
<td align="right">151.5696</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="right">2014-11-02</td>
<td align="right">2014-11-02 23:59:59</td>
<td align="right">B</td>
<td align="right">50%</td>
<td align="right">-33.09270</td>
<td align="right">151.5656</td>
</tr>
<tr class="odd">
<td align="left">3</td>
<td align="right">2014-11-03</td>
<td align="right">2014-11-03 23:59:59</td>
<td align="right">B</td>
<td align="right">50%</td>
<td align="right">-33.08210</td>
<td align="right">151.5586</td>
</tr>
<tr class="even">
<td align="left">4</td>
<td align="right">2014-11-04</td>
<td align="right">2014-11-04 23:59:59</td>
<td align="right">B</td>
<td align="right">50%</td>
<td align="right">-33.08507</td>
<td align="right">151.5833</td>
</tr>
</tbody>
</table>
<p>The centroid location can then be added to a plot using the
<code><a href="../reference/addCentroids.html">addCentroids()</a></code> function:</p>
<pre><code><span><span class="fu"><a href="../reference/plotAreas.html">plotAreas</a></span><span class="op">(</span><span class="va">areas.daily</span>, base.raster <span class="op">=</span> <span class="va">water</span>, group <span class="op">=</span> <span class="st">"B"</span>, timeslot <span class="op">=</span> <span class="fl">1</span>, title <span class="op">=</span> <span class="st">"Group B (2014-11-01)"</span><span class="op">)</span> <span class="op">+</span></span>
<span>        <span class="fu"><a href="../reference/addCentroids.html">addCentroids</a></span><span class="op">(</span>input <span class="op">=</span> <span class="va">df.centroid.B</span>, timeslot <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre>
<p><img src="getCentroids.png" id="id" class="class" style="width:70.0%"></p>
</div>
<div class="section level3">
<h3 id="track-areas">3.3.2. Track areas<a class="anchor" aria-label="anchor" href="#track-areas"></a>
</h3>
<pre><code><span><span class="va">areas.track</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getAreas.html">getAreas</a></span><span class="op">(</span>input <span class="op">=</span> <span class="va">dbbmm.time</span>, type <span class="op">=</span> <span class="st">"track"</span><span class="op">)</span></span>
<span><span class="va">areas.track</span><span class="op">$</span><span class="va">areas</span><span class="op">$</span><span class="va">Bream</span></span></code></pre>
<table class="table">
<thead><tr class="header">
<th align="left">Slot</th>
<th align="right">ID</th>
<th align="right">Area.5</th>
<th align="right">Area.95</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">130</td>
<td align="right">A69.9004.494_Track_01</td>
<td align="right">719437.6</td>
<td align="right">2689692</td>
</tr>
<tr class="even">
<td align="left">130</td>
<td align="right">A69.9004.496_Track_01</td>
<td align="right">974748.7</td>
<td align="right">3658629</td>
</tr>
<tr class="odd">
<td align="left">130</td>
<td align="right">A69.9004.497_Track_01</td>
<td align="right">691623.2</td>
<td align="right">2575944</td>
</tr>
<tr class="even">
<td align="left">131</td>
<td align="right">A69.9004.494_Track_01</td>
<td align="right">712795.4</td>
<td align="right">2760266</td>
</tr>
<tr class="odd">
<td align="left">131</td>
<td align="right">A69.9004.496_Track_01</td>
<td align="right">892135.9</td>
<td align="right">3463098</td>
</tr>
<tr class="even">
<td align="left">131</td>
<td align="right">A69.9004.497_Track_01</td>
<td align="right">711550.0</td>
<td align="right">2649008</td>
</tr>
<tr class="odd">
<td align="left">132</td>
<td align="right">A69.9004.494_Track_01</td>
<td align="right">679999.3</td>
<td align="right">2532769</td>
</tr>
<tr class="even">
<td align="left">132</td>
<td align="right">A69.9004.496_Track_01</td>
<td align="right">885908.8</td>
<td align="right">3410375</td>
</tr>
<tr class="odd">
<td align="left">132</td>
<td align="right">A69.9004.497_Track_02</td>
<td align="right">871794.0</td>
<td align="right">3403733</td>
</tr>
</tbody>
</table>
<p>Track areas have an <strong>ID</strong> column, identifying the
corresponding transmitter and track.</p>
<p><a href="a-4_Overlaps.html">Proceed to Calculating overlaps</a></p>
<p><a href="#">Back to top.</a></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Yuri Niella, Hugo Flávio.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
