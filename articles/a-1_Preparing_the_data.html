<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>1. Preparing the data • RSP</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="1. Preparing the data">
<meta property="og:description" content="RSP">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RSP</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/a-1_Preparing_the_data.html">1. Preparing the data</a>
    </li>
    <li>
      <a href="../articles/a-2_Refining_Shortest_paths.html">2. Refining the Shortest Paths in-water</a>
    </li>
    <li>
      <a href="../articles/a-3_dBBMM.html">3. Calculating utilization distribution</a>
    </li>
    <li>
      <a href="../articles/a-4_Overlaps.html">4. Calculating overlaps</a>
    </li>
    <li>
      <a href="../articles/a-5_Areas_in_steps.html">5. Calculating areas in steps</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/YuriNiella/RSP/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>1. Preparing the data</h1>
            <h3 data-toc-skip class="subtitle">Refining the Shortest
Paths (RSP) of animals tracked with acoustic transmitters in estuarine
regions</h3>
                        <h4 data-toc-skip class="author">Yuri Niella
&amp; Hugo Flávio</h4>
            
            <h4 data-toc-skip class="date">2023-08-09</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/YuriNiella/RSP/blob/HEAD/vignettes/a-1_Preparing_the_data.Rmd" class="external-link"><code>vignettes/a-1_Preparing_the_data.Rmd</code></a></small>
      <div class="hidden name"><code>a-1_Preparing_the_data.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="index">Index<a class="anchor" aria-label="anchor" href="#index"></a>
</h2>
<ol style="list-style-type: decimal">
<li><a href="a-1_Preparing_the_data.html">Preparing the data</a></li>
<li><a href="a-2_Refining_Shortest_paths.html">Refining the Shortest
Paths in-water</a></li>
<li><a href="a-3_dBBMM.html">Calculating utilization
distribution</a></li>
<li><a href="a-4_Overlaps.html">Calculating overlaps</a></li>
<li><a href="a-5_Areas_in_steps.html">Calculating areas in
steps</a></li>
</ol>
<hr>
</div>
<div class="section level2">
<h2 id="before-we-start">Before we start<a class="anchor" aria-label="anchor" href="#before-we-start"></a>
</h2>
<p>It is important to clarify the distinction between
<strong>receivers</strong> and <strong>stations</strong>. For the
purpose of this manual (and RSP in general), a receiver is the actual
hydrophone that recorded a detection, while a station is the
geographical position where that receiver was placed at the time of
recording. Therefore, when referring to tag movements, we will always
refer to them as movements <strong>between stations</strong> (because
the receivers placed at a station can vary throughout the study period).
<strong>Receivers</strong> are referred to by their serial numbers,
while <strong>stations</strong> are referred to by their
<strong>standard names</strong>. A station’s standard name can be found
in the spatial data frame (it is essentially the station’s row number).
We use standard names rather than the names provided by the user to
avoid complications during the analysis.</p>
</div>
<div class="section level2">
<h2 id="preliminary-analysis-of-acoustic-detections-using-actel">1.1. Preliminary analysis of acoustic detections using actel<a class="anchor" aria-label="anchor" href="#preliminary-analysis-of-acoustic-detections-using-actel"></a>
</h2>
<p>Analysing acoustic telemetry data requires initial filtering to
exclude misleading data (e.g. false detections, detections prior to
release). To overcome this issue and ensure reliable results, the RSP
tool-kit operates in close relationship with the <a href="https://cran.r-project.org/package=actel" class="external-link"><strong>actel R
package</strong></a>, which filters and invalidates flawed detections.
Before getting started with RSP, you will have to download actel and
filter your acoustic data.</p>
<p>To start using RSP, you can run the simplest actel analysis with the
function <code>explore</code>. You can find more about how to organize
your data and run this preliminary analysis in actel’s manual pages (run
<code>browseVignettes('actel')</code> after loading the library).</p>
<p>It is important that you save the output of the actel function, so
you can later on use it in RSP. e.g.:</p>
<pre><code><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/hugomflavio/actel" class="external-link">actel</a></span><span class="op">)</span></span>
<span><span class="va">filtered_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/actel/man/explore.html" class="external-link">explore</a></span><span class="op">(</span>tz <span class="op">=</span> <span class="st">"Europe/Copenhagen"</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="preparing-the-data-from-your-study-area-using-actel">1.2. Preparing the data from your study area using actel<a class="anchor" aria-label="anchor" href="#preparing-the-data-from-your-study-area-using-actel"></a>
</h2>
<p>To recreate the shortest in-water paths of tracked animals, RSP needs
a <strong>transition layer</strong> from your study area. You may
already have a transition layer calculated for your study area, or you
can use actel again to do so. First, you need to load a
<strong>shapefile</strong> (.shp) from your study area
<strong>delimiting the land contours</strong> using
<code>loadShape()</code>. This function automatically imports your
shapefile and converts it to a raster, and the corresponding pixel size
must be set using the <code>size</code> argument (refer to actel’s
documentation for more details). After loading your shapefile, you need
to create your transition layer using <code>transitionLayer()</code>.
You can choose a number of <code>directions</code> for distance
calculations (again, refer to actel’s documentation for more
details).</p>
<pre><code><span><span class="va">water.shape</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/actel/man/loadShape.html" class="external-link">loadShape</a></span><span class="op">(</span>shape <span class="op">=</span> <span class="st">"my_study_area.shp"</span>, size <span class="op">=</span> <span class="fl">0.0001</span><span class="op">)</span>  </span>
<span><span class="va">water.transition</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/actel/man/transitionLayer.html" class="external-link">transitionLayer</a></span><span class="op">(</span><span class="va">water.shape</span>, directions <span class="op">=</span> <span class="fl">16</span><span class="op">)</span></span></code></pre>
<p>Please have in mind that both the transition layer and the base
raster (your imported shapefile) will be required during the RSP
analysis. RSP currently accepts shapefiles in both
<strong>metric</strong> and <strong>geographic</strong> coordinate
reference systems.</p>
</div>
<div class="section level2">
<h2 id="checking-the-quality-of-the-input-files">1.3. Checking the quality of the input files<a class="anchor" aria-label="anchor" href="#checking-the-quality-of-the-input-files"></a>
</h2>
<p>Depending on the shapefile provided from your study area, the pixel
size used and the locations of your stations (provided earlier in the
spatial dataset for actel), it may be that your stations could end up in
land during analysis. This will cause the RSP analysis to return
erroneous results, such as animal tracks crossing extensively through
land. To avoid this issue, you can use the <code><a href="../reference/plotRaster.html">plotRaster()</a></code>
function to test the quality of the input coordinates:</p>
<pre><code><span><span class="fu"><a href="../reference/plotRaster.html">plotRaster</a></span><span class="op">(</span>input <span class="op">=</span> <span class="va">filtered_data</span>, base.raster <span class="op">=</span> <span class="va">water.shape</span>, coord.x <span class="op">=</span> <span class="st">"Longitude"</span>, coord.y <span class="op">=</span> <span class="st">"Latitude"</span><span class="op">)</span></span></code></pre>
<dl>
<dt>Note:</dt>
<dd>
<code>coord.x</code> and <code>coord.y</code> must be the column names
containing the coordinates in the spatial data frame.
</dd>
</dl>
<p><img src="plotRaster.png" id="id" class="class" style="width:100.0%"></p>
<p>If you get a plot similar to this one, with only
<strong>Water</strong> showing up in the legend, it means that all your
stations are placed <strong>in the water</strong> and you are all good
to continue. If any stations are <strong>in land</strong>, they will be
coloured differently in this plot. If this happens, you must then either
adjust your shapefile or the station positions in the spatial dataset
before continuing.</p>
<dl>
<dt>Note:</dt>
<dd>
Adjusting the station coordinates will require you to run actel’s
analysis again.
</dd>
</dl>
<p><a href="a-2_Refining_Shortest_paths.html">Proceed to Refining the
Shortest Paths in-water</a></p>
<p><a href="#">Back to top.</a></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Yuri Niella, Hugo Flávio.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
